


<%= form_with(model: review) do |form| %>


  <% if review.errors.any? %>
    <div style="color: red">
      <h2><%= pluralize(review.errors.count, "error") %> prohibited this review from being saved:</h2>

      <ul>
        <% review.errors.each do |error| %>
          <li><%= error.full_message %></li>
        <% end %>
      </ul>
    </div>
  <% end %>

 

  <div>
    <%= form.label :rating1, style: "display: block" %>
  </div>

  <div>
    <%= form.label :rating2, style: "display: block" %>
    <%= form.select :rating2, ["1", "2", "3", "4", "5"], autofocus: true, autocomplete: "category" %>
    <%#= form.number_field :rating2 %>
  </div>

  <div>
    <%= form.label :rating3, style: "display: block" %>
    <%= form.select :rating3, ["1", "2", "3", "4", "5"], autofocus: true, autocomplete: "category" %>
    <%#= form.number_field :rating3 %>
  </div>

  <div>
    <%= form.label :description, style: "display: block" %>
    <%= form.text_field :description %>
  </div>

  <div>
    <%= form.label :imgs, style: "display: block" %>
    <%= form.text_field :imgs %>
  </div>

  <%= form.hidden_field :dish_id, value: session[:save_dish] %>
  <%= form.hidden_field :reviewer_id, value: current_reviewer.id %>

  <div>
    <%= form.submit %>
  </div>





<div id = "middle">
        <div id = "midtop">
            <div id = "col1">
                <div id = "foto">
                    <div id = "image">
                            <input type="file" class = "form-control-file">
                    </div>
                    <div id = "image_lbl">Inserisci una foto</div>
                </div>
            </div>
            <div id = "col2">
                <div id = "plate_name">@NOMEPIATTO BACKEND</div>
                <div id = "ratings">
                    <div class = "rating" id = "gusto">
                        <div id = "gusto_lbl">Gusto</div>
                        <div class = "rtg" id = "gusto_rtg">
                            <div id = "gusto_select">
                            <%= form.select :rating1, ["1", "2", "3", "4", "5"], :class => "pippo2", autofocus: true, :onchange => "return modificaValore1  (this);" %>
                                <select name="numbers" id="gusto_numbers"  onchange="return modificaValore1(this);">
                                    <option value="1">1</option>
                                    <option value="2">2</option>
                                    <option value="3">3</option>
                                    <option value="4">4</option>
                                    <option value="4">5</option>
                                  </select>
                            </div>
                            <div class = "pb" id = "gusto_pb">
                                <div class="progress">
                                    <div class="progress-bar progress-bar-striped bg-info" role="progressbar" style="width: 80%" aria-valuenow="80" aria-valuemin="0" aria-valuemax="100" id = "pg1"></div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class = "rating" id = "impiattamento">
                        <div id = "impiattamento_lbl">Impiattamento</div>
                        <div class = "rtg" id = "impiattamento_rtg">
                            <div id = "impiattamento_select">
                                <select name="numbers" id="impiattamento_numbers"  onchange="return modificaValore2(this);">
                                    <option value="1">1</option>
                                    <option value="2">2</option>
                                    <option value="3">3</option>
                                    <option value="4">4</option>
                                    <option value="4">5</option>
                                  </select>
                            </div>
                            <div class = "pb" id = "impiattamento_pb">
                                <div class="progress">
                                    <div class="progress-bar progress-bar-striped bg-success" role="progressbar" style="width: 20%" aria-valuenow="20" aria-valuemin="0" aria-valuemax="100" id = "pg2"></div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class = "rating" id = "originalità">
                        <div id = "originalità_lbl">Originalità</div>
                        <div  class = "rtg" id = "originalità_rtg">
                            <div id = "originalità_select">
                                <select name="numbers" id="originalità_numbers"  onchange="return modificaValore3(this);">
                                    <option value="1">1</option>
                                    <option value="2">2</option>
                                    <option value="3">3</option>
                                    <option value="4">4</option>
                                    <option value="4">5</option>
                                  </select>
                            </div>
                            <div class = "pb" id = "impiattamento_pb">
                                <div class="progress">
                                    <div class="progress-bar progress-bar-striped bg-warning" role="progressbar" style="width: 60%" aria-valuenow="60" aria-valuemin="0" aria-valuemax="100" id = "pg3"></div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div id = "description">
                    <div id = "desc_lbl">
                        Inserisci una descrizione
                    </div>
                    <div id = "desc_area">
                        <textarea></textarea>
                    </div>
                </div>
                <div id = "user_name">Recensione effettuata da @Username BACKEND</div>
                
            </div>
        </div>
        <div id = "midbottom">
            <div id = "confirm">
                <div id = "confirm_btn" class = "btn btn-success btn-responsive">
                    Conferma
                </div>
            </div>
            <div id = "cancel">
                <div id = "cancel_btn" class = "btn btn-danger btn-responsive">
                    Annulla
                </div>
            </div>
        </div>
    </div>

<% end %>



<%#=session[:save_dish]%>


<%= stylesheet_link_tag "nuovaRecensione.css" %>


<script src="https://code.jquery.com/jquery-3.5.1.slim.min.js" integrity="sha384-DfXdz2htPH0lsSSs5nCTpuj/zy4C+OGpamoFVy38MVBnE+IbbVYUew+OrCXaRkfj" crossorigin="anonymous"></script>

<script>
$(document).ready(function first(){
  

    document.getElementById("review_rating1").setAttribute("onchange", "return modificaValore1(this);");
})

function modificaValore1(select){
    var selezionato = select.options[select.selectedIndex].value;
    document.getElementById("pg1").setAttribute("style", "width: "+  String(Number(selezionato)*20)+"%");
}
function modificaValore2(select){
    var selezionato = select.options[select.selectedIndex].value;
    document.getElementById("pg2").setAttribute("style", "width: "+  String(Number(selezionato)*20)+"%");
}
function modificaValore3(select){
    var selezionato = select.options[select.selectedIndex].value;
    document.getElementById("pg3").setAttribute("style", "width: "+  String(Number(selezionato)*20)+"%");

}
</script>